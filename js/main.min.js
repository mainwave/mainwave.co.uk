$(document).ready((function(){var e=$("body"),o=$("#nav"),a=$("#content-section").find(".section"),n=$(".back-to-top"),i=$("#footer"),t=$("#email-address"),r=$(".template.permalink-container").detach().removeClass("template");function l(e){var n,t=function(){$(e).slideDown(300,(function(){i.removeClass("long")}))};e=e&&0!==$(e).length?e.replace(/^[^#]/,"#$&"):o.find("a:first").attr("href"),(n=window.location.href.replace(window.location.hash,""))!==window.location.href&&"replaceState"in window.history&&window.history.replaceState(null,"",n),o.find("a").removeClass("current").end().find('a[href="'+e+'"]').addClass("current").end(),i.addClass("long");var r=a.filter(":visible");r.length?r.slideUp("fast",t):t()}$("#nav a, a.local").click((function(e){l($(this).attr("href")),e.preventDefault()})),$("#book-reader-gallery").click((function(){$.slimbox([["images/bookreader/01.png","Bookshelf view"],["images/bookreader/02.png","Table of contents in portrait orientation"],["images/bookreader/03.png","Search results view"],["images/bookreader/04.png","Adding a bookmark"],["images/bookreader/05.png","Bookmarks view"],["images/bookreader/06.png",'Sticky note shown in default "collapsed" mode'],["images/bookreader/07.png","Sticky note shown in detail mode"],["images/bookreader/08.png","Adding a weblink"],["images/bookreader/09.png","Weblink shown in detail mode"],["images/bookreader/10.png","Multi-colour highlights, both single-line and rectangle"],["images/bookreader/11.png","Deleting a highlight"]],0,{loop:!1})})),e.toggleClass("no-box-shadow",!Modernizr.boxshadow).toggleClass("no-rgba",!Modernizr.rgba).removeClass("no-js").addClass("js"),a.hide(),n.hide();var d=window.location.href.replace(window.location.hash,"").replace(/^https?:\/\//,"").replace(/^www./,"");a.find("h2:first-child").each((function(){var e=$(this),o="#"+e.parents(".section").attr("id");r.clone().find("a").attr("href",o).find(".section-name").text(e.text()).end().find(".url").text(d+o).end().end().click((function(e){e.preventDefault()})).insertBefore(e)})),l(window.location.hash);var s=t.text();t.html('<a href="mailto:'+s+'">'+s+"</a>"),$("#copyright-year").text((new Date).getFullYear())}));